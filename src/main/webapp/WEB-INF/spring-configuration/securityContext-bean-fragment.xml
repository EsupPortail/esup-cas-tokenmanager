  <bean id="serviceProperties" class="org.springframework.security.cas.ServiceProperties" xmlns:p="http://www.springframework.org/schema/p"
      p:service="${cas.securityContext.serviceProperties.service}"
      p:sendRenew="false"/>

  <bean id="casProcessingFilter" class="org.springframework.security.cas.web.CasAuthenticationFilter" xmlns:p="http://www.springframework.org/schema/p"
        p:authenticationManager-ref="casAuthenticationManager"
        p:filterProcessesUrl="/tokenManager/j_acegi_cas_security_check" > 
    <property name="authenticationSuccessHandler">
      <bean class="org.springframework.security.web.authentication.SavedRequestAwareAuthenticationSuccessHandler" xmlns:p="http://www.springframework.org/schema/p"
            p:alwaysUseDefaultTargetUrl="false"
            p:defaultTargetUrl="/tokenManager"/>
    </property>
    <property name="authenticationFailureHandler">
      <bean class="org.springframework.security.web.authentication.SimpleUrlAuthenticationFailureHandler">
        <constructor-arg index="0" value="/authorizationFailure.html"/>
      </bean>
    </property>
  </bean>

  <bean id="casProcessingFilterEntryPoint" class="org.springframework.security.cas.web.CasAuthenticationEntryPoint" xmlns:p="http://www.springframework.org/schema/p"
        p:loginUrl="${cas.securityContext.casProcessingFilterEntryPoint.loginUrl}"
        p:serviceProperties-ref="serviceProperties" />

  <bean id="casAuthenticationProvider" class="org.springframework.security.cas.authentication.CasAuthenticationProvider" xmlns:p="http://www.springframework.org/schema/p"
        p:key="my_password_for_this_auth_provider_only"
        p:serviceProperties-ref="serviceProperties"
        p:userDetailsService-ref="userDetailsService" >
    <property name="ticketValidator">
      <bean class="org.jasig.cas.client.validation.Cas20ServiceTicketValidator">
        <constructor-arg index="0" value="${cas.securityContext.ticketValidator.casServerUrlPrefix}"/>
      </bean>
    </property>
  </bean>

